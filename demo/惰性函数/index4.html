<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <script>
        //惰性函数针对于优化频繁使用的函数，常用于库函数的封装
        //例如写一个text函数，这个函数返回数次调用new Date().getTime()
        var t = null
        function text(){
            if(t){
                return t
            }
            t = new Date().getTime()
            return t
        }
        //采用上面的这种形式主要有以下原因，第一全局变量的污染，第二每次执行text函数时，都会执行判断逻辑

        var text = function(){
            var t = new Date().getTime()
            text = function(){
                return t
            }
            return text()
        }

        //上面的这种形式采用的方式能够达到预期的实现效果，其采用的方式是使用闭包的特性

        //对于addEvent的封装，采用惰性函数能够实现之后的调用的时候不会经历判断的过程
        function addEvent(dom, type, handler){
            if(dom.addEventListener){//对于浏览器的兼容性处理
                dom.addEventListener(type, handler, false)//flase表示采用实践冒泡的方式
                addEvent = function(dom, type, handler){
                    dom.addEventListener(type, handler, false)
                }
            }else{
                dom.attachEvent('on' + type, handler)//第一次判断所走的逻辑
                addEvent = function(dom, type, handler){//之后的每一次不需要判断去走的逻辑，满足了惰性函数的要求
                    dom.attachEvent('on' + type, handler)
                }
            }
        }


    </script>
</body>
</html>